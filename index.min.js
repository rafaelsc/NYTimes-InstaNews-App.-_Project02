newFunction();

function newFunction() {
    $(function () {
        var o = 12;

        function r() {
            o = 12, $(".articles").addClass("loader"), $("header").addClass("header-small"), $("footer").addClass("footer-small"), $(".search-bar").css("display", "flex"), $(".articles").empty();
            var e, l, a = $(".category").val(),
                t = $(".search").val();
            e = "https://api.nytimes.com/svc/topstories/v2/" + a + ".json?api-key=1f73ed52c30d4864bb4d5b310aec39fc", l = t, $.ajax({
                method: "GET",
                url: e
            }).done(function (e) {
                for (var a = e.results, t = 0; t < a.length; t++) {
                    if (5 === a[t].multimedia.length) {
                        var r = a[t].multimedia[4].url;
                        if (r && 0 < o) {
                            var s = n(a[t].abstract, l),
                                c = n(a[t].title, l);
                            (!l || s || c) && ($(".articles").append("<a href='" + a[t].url + "' class='article' style='background:url(" + r + ") no-repeat center/cover;'><li><p class='article-text'>" + a[t].abstract + "</p></li></a>"), o--);
                        }
                        if (0 === o) {
                            break;
                        }
                    }
                }
                12 === o && $(".articles").html("<p class='no-article'>Sorry, no article found.</p>"), $(".articles").removeClass("loader");
            }).fail(function (e) {
                throw e;
            });
        }
        $(".category").change(function () {
            r();
        }), $(".category").selectric(), window.addEventListener("touchstart", function () {
            $(".article-text").css("opacity", "1");
        });
        var s = $(".search").val().length;

        function n(e, a) {
            return -1 !== e.toLowerCase().indexOf(a.toLowerCase());
        }
        $(".search").on("keyup", function (e) {
            var a = e.keyCode,
                t = $(this).val().length;
            (a <= 90 && 48 <= a || 8 === a && s !== t || 46 === a && s !== t) && r(), s = t;
        }), $(".search").on("change paste", function () {
            r();
        }), $(".search").keypress(function (e) {
            13 === e.keyCode && e.preventDefault();
        });
    });
}